<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Survey</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
    }
    iframe {
      border: 0;
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body>

  <iframe
    id="tf"
    src="https://form.typeform.com/to/D7n5AWQv"
    allow="camera; microphone; autoplay; encrypted-media;"
  ></iframe>

  <script>
    let inactivityTimer;

    const INACTIVITY_TIME = 1 * 60 * 1000; // 3 minutes

    function restartTypeform() {
      const iframe = document.getElementById("tf");
      const src = iframe.src;

      // unload form
      iframe.src = "about:blank";

      // reload form shortly after
      setTimeout(() => {
        iframe.src = src;
      }, 150);
    }

    function resetTimer() {
      clearTimeout(inactivityTimer);
      inactivityTimer = setTimeout(() => {
        restartTypeform();   // ðŸ” only restarts the form
      }, INACTIVITY_TIME);
    }

    // what counts as activity
    ['mousemove', 'keydown', 'scroll', 'touchstart'].forEach(evt => {
      document.addEventListener(evt, resetTimer, true);
    });

    // start timer on load
    resetTimer();
  </script>

</body>
</html>
